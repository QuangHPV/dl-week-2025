# FastAPI AI Agent

## Overview

This FastAPI application serves as the backend for our AI Content Detection and Fact-Checking System. It provides powerful APIs for detecting AI-generated text, fact-checking information, and analyzing images for potential deepfakes.

## Core Capabilities

### AI-Generated Text Detection

The system uses a RoBERTa-based model to analyze text and determine the likelihood that it was generated by an AI system like ChatGPT, Claude, or other large language models. The detection works by:

1. Preprocessing the input text to normalize formatting
2. Chunking the text into manageable segments
3. Running each chunk through the detection model
4. Aggregating the results to produce a final confidence score

For optimal results, provide at least 1000 characters of text. Shorter texts may not contain enough patterns for reliable detection.

### Fact-Checking

The fact-checking system employs a sophisticated two-tier approach:

1. **Query Generation**: The system analyzes the claim to generate effective search queries that will retrieve relevant information.
2. **Source Analysis**: It retrieves information from reliable sources using Google Search API and analyzes the content against the claim.
3. **Verification**: An LLM evaluates the evidence and classifies the claim as TRUE, FALSE, or UNVERIFIABLE, providing explanations and citing sources.

This approach allows for nuanced fact-checking that considers context and can identify partial truths or misleading statements.

### Deepfake Detection

The system implements multiple approaches to deepfake detection:

1. **Hugging Face Models**: Uses pre-trained models from Hugging Face to classify images as real or fake.
2. **YOLO Object Detection**: Identifies people in images before running deepfake detection on those regions.
3. **Roboflow Integration**: Leverages Roboflow's cloud API for additional detection capabilities.
4. **DIRE Model**: Implements the DIRE (Diffusion Residual) model for detecting manipulation traces.
5. **DFDC Model**: Uses the DeepFake Detection Challenge model for additional verification.

By ensembling multiple models, we achieve more robust detection across different types of manipulations.

## Technical Implementation

### Directory Structure

```
fastapi-ai-agent/
├── src/
│   ├── main.py                  # FastAPI application entry point
│   ├── ai_detector/             # AI-generated text detection
│   │   ├── generated_text.py    # Text detection implementation
│   │   └── preprocess.py        # Text preprocessing utilities
│   ├── fact_check/              # Fact-checking functionality
│   │   ├── search_utils.py      # Search engine integration
│   │   └── sources_cite.py      # Source retrieval and citation
│   └── deepfake_model/          # Deepfake detection
│       ├── hf.py                # Hugging Face model implementation
│       ├── roboflow.py          # Roboflow integration
│       └── model/               # Additional model implementations
├── requirements.txt             # Project dependencies
└── README.md                    # This documentation
```

### API Endpoints

#### AI-Generated Text Detection

```
POST /check-ai-generated/
```

Request body:

```json
{
  "text": "Text to analyze for AI generation"
}
```

Response:

```json
{
  "generated_score": 0.75 // Score between 0-1, higher means more likely AI-generated
}
```

#### Fact-Checking

```
POST /fact-check/
```

Request body:

```json
{
  "fact": "Claim to verify"
}
```

Response:

```json
{
  "result": "TRUE/FALSE/UNVERIFIABLE with explanation and sources"
}
```

#### Source Retrieval

```
POST /get_links/
```

Request body:

```json
{
  "text": "Text to find sources for"
}
```

Response:

```json
{
  "result": [
    {
      "title": "Source title",
      "url": "Source URL",
      "summary": "Brief summary of the source"
    }
    // Additional sources...
  ]
}
```

## Environment Variables

The application requires the following environment variables:

- `OPENAI_API_KEY`: API key for OpenAI (used for LLM-based fact-checking)
- `GOOGLE_API_KEY`: Google API key for search functionality
- `GOOGLE_CSE_ID`: Google Custom Search Engine ID
- `PERPLEXITY_API_KEY`: API key for Perplexity (used for source retrieval)

## Development

### Running Locally

1. Install dependencies:

   ```
   pip install -r requirements.txt
   ```

2. Set up environment variables (create a `.env` file in the project root)

3. Run the FastAPI server:
   ```
   uvicorn src.main:app --reload
   ```

### Adding New Models

To add a new detection model:

1. Create a new module in the appropriate directory
2. Implement the detection logic
3. Update the main.py file to include the new endpoint
4. Update the requirements.txt file if new dependencies are needed

## Performance Considerations

- The AI text detection model requires at least 20 words for meaningful results
- Deepfake detection works best on clear, front-facing images of people
- Fact-checking accuracy depends on the availability of reliable sources for the topic

## Future Improvements

- Implement caching for frequent queries to improve performance
- Add support for more languages beyond English
- Integrate additional deepfake detection models for improved accuracy
- Implement a feedback mechanism to continuously improve detection accuracy
